<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vrunda Tol">
<meta name="author" content="Michael Roysner">
<meta name="dcterms.date" content="2024-03-10">
<meta name="description" content="Three Potential Venture Ideas">

<title>Environmental Venture Research: Critical Minerals Supply Chain – Vrunda Tol</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../media/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-f0d918914268357f3a9cbe6db1f0bfe0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Vrunda Tol</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../media/Tol_Vrunda_Resume.pdf"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../media/Tol_Vrunda_SF_TOP_5.pdf"> 
<span class="menu-text">Strengths</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">Environmental Venture Research: Critical Minerals Supply Chain</h1>
            <p class="subtitle lead">ESM 256B: Value Proposition Design for New Environmental Ventures</p>
                  <div>
        <div class="description">
          Three Potential Venture Ideas
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Critical Minerals</div>
                <div class="quarto-category">Supply Chains</div>
                <div class="quarto-category">Industrial Ecology</div>
                <div class="quarto-category">E-Waste</div>
                <div class="quarto-category">Circularity</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-left">

      <div>
      <div class="quarto-title-meta-heading">Authors</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://vrundatol.github.io/">Vrunda Tol</a> </p>
               <p><a href="https://www.linkedin.com/in/michael-roysner-49429a284/">Michael Roysner</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 10, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#team-critical-control" id="toc-team-critical-control" class="nav-link active" data-scroll-target="#team-critical-control">Team Critical Control</a>
  <ul class="collapse">
  <li><a href="#positioning-statement" id="toc-positioning-statement" class="nav-link" data-scroll-target="#positioning-statement">Positioning statement</a></li>
  <li><a href="#environmental-issues-in-industries" id="toc-environmental-issues-in-industries" class="nav-link" data-scroll-target="#environmental-issues-in-industries">Environmental Issues in Industries</a></li>
  <li><a href="#ventures-and-roadblocks" id="toc-ventures-and-roadblocks" class="nav-link" data-scroll-target="#ventures-and-roadblocks">Ventures and Roadblocks</a>
  <ul class="collapse">
  <li><a href="#verification-framework" id="toc-verification-framework" class="nav-link" data-scroll-target="#verification-framework">1. Verification Framework:</a></li>
  <li><a href="#waste-collection-for-critical-materials-recyclers" id="toc-waste-collection-for-critical-materials-recyclers" class="nav-link" data-scroll-target="#waste-collection-for-critical-materials-recyclers">2. Waste Collection for Critical Materials Recyclers</a></li>
  <li><a href="#battery-identifier" id="toc-battery-identifier" class="nav-link" data-scroll-target="#battery-identifier">3. Battery Identifier</a></li>
  </ul></li>
  <li><a href="#industry-and-market-forcestrends" id="toc-industry-and-market-forcestrends" class="nav-link" data-scroll-target="#industry-and-market-forcestrends">Industry and Market Forces/Trends</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">





<section id="team-critical-control" class="level1">
<h1>Team Critical Control</h1>
<section id="positioning-statement" class="level2">
<h2 class="anchored" data-anchor-id="positioning-statement">Positioning statement</h2>
<p>The original intent in the discovery period of our environmental venture was to address environmental inflection points in the critical minerals and materials supply chain of the quickly growing renewable energy infrastructure industry such as EV Batteries, Turbines, Grid Structure, etc.</p>
</section>
<section id="environmental-issues-in-industries" class="level2">
<h2 class="anchored" data-anchor-id="environmental-issues-in-industries">Environmental Issues in Industries</h2>
<p>Critical minerals like Lithium, Cobalt, Nickel, Copper, and Manganese drive the advancement of the renewable energy transition. To build renewable energy infrastructure such as EV batteries, solar panels, and battery storage systems, we need to ensure a robust and resilient supply chain of these minerals. The supply chain components for these critical minerals are spread globally. Global coordination and harmony are required to ensure a smooth flow of these minerals. Yet, this is not what occurs, as differing geopolitical tensions and ties have created bottlenecks in various regions across the world in this supply chain. This has made the supply chain critically insecure and non-transparent, and oftentimes, this obfuscation is used to export environmental issues in industries extracting and using these materials to regions with lax regulatory practices.</p>
<p>It is important to first trace the environmental impacts of the critical minerals in the mining, refining, production, and disposal stages to then manage and reduce them. The environmental issues associated with mining include the exposure of mine workers to toxic gases and materials. Groundwater is often used to extract Lithium, which leads to water shortages in the local communities. Acid mine drainage and land use alteration are also caused by mining activities. In refining, the environmental issues include air, water, and soil pollution, and ecosystem toxicity due to the leakage of toxic materials. Similar impacts are seen if the products are not handled and disposed of safely during end-of-life.</p>
<p>Our project aimed to find solutions to improve traceability and circularity of the critical minerals supply chain. We narrowed down our focus to Lithium, Cobalt, Nickel, Copper, and Manganese, which are used in EV batteries.</p>
</section>
<section id="ventures-and-roadblocks" class="level2">
<h2 class="anchored" data-anchor-id="ventures-and-roadblocks">Ventures and Roadblocks</h2>
<p>Through our research, we attempted to identify 3 potential ventures to remediate issues we found within industries surrounding critical minerals and materials. While each identified venture is not unfeasible, we found that the level of support needed for some of our ventures, or the inherent structure of our frameworks, was not sufficient to produce a workable venture in the program length. Below is a summary of our 3 venture ideas, with a background, attempted solution, and reasoning for being unable to move forward with the issue.</p>
<section id="verification-framework" class="level3">
<h3 class="anchored" data-anchor-id="verification-framework">1. Verification Framework:</h3>
<section id="idea" class="level4">
<h4 class="anchored" data-anchor-id="idea">Idea</h4>
<p>This venture iteration was founded on the idea of creating a ‘scorecard’ of sorts to analyze and grade suppliers and materials based on their environmental and human rights impacts. This would theoretically make it easier for procurers and consumers to know where their products’ materials were coming from and how ‘good’ they are. The framework was to be narrowed down toward EV Batteries, taking inspiration from JD Power &amp; Associates</p>
</section>
<section id="roadblock" class="level4">
<h4 class="anchored" data-anchor-id="roadblock">Roadblock</h4>
<p>We found through our interviews (most specifically with Allosense and Tesla) that in developing a verification framework, we would need sensitive proprietary corporate information. This information is not freely available, and we found that companies were and are largely unwilling to work with universities in this area. We found that we would need a large partner (government entity) that could use its power/influence to coerce companies into providing this information. We realized early on that the work needed to do so was not feasible for us or necessarily relevant to the main purpose of the Eco-E Opportunity project.</p>
</section>
</section>
<section id="waste-collection-for-critical-materials-recyclers" class="level3">
<h3 class="anchored" data-anchor-id="waste-collection-for-critical-materials-recyclers">2. Waste Collection for Critical Materials Recyclers</h3>
<section id="idea-1" class="level4">
<h4 class="anchored" data-anchor-id="idea-1">Idea</h4>
<p>This venture idea was founded during our research into how recyclers (such as Redwood Materials) track/procure/source their materials and the general environmental impacts of EV Battery circularity. It became apparent that:</p>
<p>A) Recycling has little environmental impact and is advanced enough to handle most battery types.</p>
<p>B) Recyclers do not have enough supply of end-of-life batteries, as most are still ‘young’ and their end-of-life is over 20~ years away. In turn, they struggle to source materials for market viability.</p>
<p>We came up with the idea of creating a network/service that tracked and transported small electronics that have critical materials inside of them for these recyclers and to move these products away from landfills.</p>
</section>
<section id="roadblock-1" class="level4">
<h4 class="anchored" data-anchor-id="roadblock-1">Roadblock</h4>
<p>Transportation/Logistics ventures are notoriously difficult, and it would be incredibly hard for us to generate revenue from this venture. The resources and time available to us made this venture non-feasible. In addition, we would have to verify each recycler as a safe disposal site.</p>
</section>
</section>
<section id="battery-identifier" class="level3">
<h3 class="anchored" data-anchor-id="battery-identifier">3. Battery Identifier</h3>
<section id="idea-2" class="level4">
<h4 class="anchored" data-anchor-id="idea-2">Idea</h4>
<p>This idea drew inspiration from the proposed framework for the EU’s battery passport. The main frame was that we would create an application/service that tracked the events throughout a battery’s ‘first life’. This would include data such as usage, location, damages, events of significance, etc., that the battery may have experienced as it moved through its life. This info could then be used for those who utilize these products at end-of-life for best practices.</p>
</section>
<section id="roadblock-2" class="level4">
<h4 class="anchored" data-anchor-id="roadblock-2">Roadblock</h4>
<p>After some insight and thinking this venture was found to be non-revenue generating, as the framework aligned more with that of a non-profit, running counter to the requirements of an Eco-E Opportunity Project. In addition, an identifier would require participation from key players in multiple industries across the supply chain, alongside regulatory backing to make the scale of adoption needed occur.</p>
</section>
</section>
</section>
<section id="industry-and-market-forcestrends" class="level2">
<h2 class="anchored" data-anchor-id="industry-and-market-forcestrends">Industry and Market Forces/Trends</h2>
<p>Through our primary research, we found that innovating in battery frameworks or identifiers requires collaboration across all the key players in the market. Most innovations need backing from government policies and regulations to be implemented widely. All the interconnected supply chain components across the globe must comply for these innovations to take off. This has been achieved to an extent through the Global Battery Alliance’s Battery Passport supported by the European Union.</p>
<p>In the battery recycling industry in the US, Redwood Materials is leading with technological innovations in cathode and anode production from a mixture of recycled and virgin materials. Their challenge is an insufficient supply of recyclable minerals from batteries. Most of the EV batteries are in use and have not reached their end-of-life yet. The alternate option of extracting minerals from consumer electronics products has a low yield, considering the small quantities of the minerals present in these devices. Despite these challenges, the recycling industry needs to catch up in the coming decade to the expected increase in the supply of end-of-life batteries.</p>
<p>In an attempt to boost the domestic mining and recycling businesses and secure its domestic supply chain for these critical minerals and materials, the US government has limited tax credits only if a certain percentage of the minerals are domestically sourced. The applicable percentage was 40% in 2023 and is increased by 10% every year.1 Another policy under development is the California Vehicle Traction Bill (CA SB 615).2 This bill requires all electric vehicle traction batteries in California to be recovered and reused, repurposed, remanufactured, or remanufactured and eventually recycled at the end of their useful life.</p>
<p>In an interview with a Tesla manager, we found that they face challenges in identifying where the minerals come from. Instead of tracing the supply chain map, they would prefer a way to find out where the mineral came from by examining its properties. With further literature review in this area, we discovered a research paper on geochemical Lithium identifiers that can map Lithium to its mining source based on its isotope.3</p>
<p>Additionally, we found through our interviews that changing consumer sentiment and the expectation of future regulations have pushed various industries (especially the automotive industry) to innovate consistently. Just as well, corporate powers have begun to face both internal and external pressures to be more sustainable and environmentally responsible and this is pushing them to be more responsible to stay competitive.</p>
<p><strong>Citations:</strong></p>
<ol type="1">
<li><p>Treasury releases proposed guidance to continue the U.S. manufacturing boom in batteries and clean vehicles, and strengthen energy security. U.S. Department of the Treasury. (2023, December 1). https://home.treasury.gov/news/press-releases/jy1939#:~:text=To%20meet%20the%20critical%20mineral,be%20recycled%20in%20North%20America%E2%80%94</p></li>
<li><p>California SB615. TrackBill. (n.d.). https://trackbill.com/bill/california-senate-bill-615-vehicle-traction-batteries/2369909/</p></li>
<li><p>Desaulty, A. M., Monfort Climent, D., Lefebvre, G., Cristiano-Tassi, A., Peralta, D., Perret, S., … &amp; Guerrot, C. (2022). Tracing the origin of lithium in Li-ion batteries using lithium isotopes. Nature communications, 13(1), 1-10.</p></li>
</ol>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{tol2024,
  author = {Tol, Vrunda and Roysner, Michael},
  title = {Environmental {Venture} {Research:} {Critical} {Minerals}
    {Supply} {Chain}},
  date = {2024-03-10},
  url = {https://vrundatol.github.io/posts/2024-10-03-critical-minerals/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-tol2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Tol, Vrunda, and Michael Roysner. 2024. <span>“Environmental Venture
Research: Critical Minerals Supply Chain.”</span> March 10, 2024. <a href="https://vrundatol.github.io/posts/2024-10-03-critical-minerals/">https://vrundatol.github.io/posts/2024-10-03-critical-minerals/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Vrunda Tol</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This website is built with <i class="fa-solid fa-heart" title="a heart" aria-label="heart"></i>, <a href="https://github.com/samanthacsik/samanthacsik.github.io" target="_blank"><i class="fa-brands fa-github" title="GitHub octocat logo" aria-label="github"></i></a>, <a href="https://www.r-project.org/about.html" target="_blank"><i class="fa-brands fa-r-project" title="R Project" aria-label="r-project"></i></a> and <a href="https://quarto.org/" target="_blank">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>